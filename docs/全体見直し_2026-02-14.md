# 全体見直しメモ（2026-02-14）

## 実施内容

1. 音声認識後のテキスト補正を追加  
- `speech/RecognitionTextCleaner.kt` を追加
- フィラー語（えー/えっと/あの 等）とノイズ記号を除去
- 設定画面で ON/OFF 可能

2. 同音異義語補正を拡張  
- `format/LocalFormatter.kt` に文脈ヒント付き補正を追加
- 過置換を避けるため `forbiddenHints` を導入

3. 辞書更新を全ソース一括更新へ統合  
- `dict/DictionaryUpdater.kt` を拡張
- 一部ソース失敗時も継続して再構築
- 結果画面に「取得失敗ソース」を表示

4. メンテ/ビルド整理  
- `tmp/` の作業生成物を削除
- 不要な古いAPI分岐（minSdk 26で不要）を整理
- ユニットテスト追加（`app/src/test`）

## 追加したテスト

- `format/LocalFormatterHomophoneTest.kt`
- `speech/RecognitionTextCleanerTest.kt`

## 今後の推奨

1. 変換誤りログを週次で収集し、同音異義語ルールを追加
2. HardcodedText の段階的リソース化（i18n対応）
3. 主要ケースのUI自動テスト追加（IME操作の回帰防止）
